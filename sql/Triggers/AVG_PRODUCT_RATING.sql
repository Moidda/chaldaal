CREATE OR REPLACE TRIGGER AVG_PRODUCT_RATING
BEFORE INSERT OR UPDATE
ON PRODUCT_RATING
FOR EACH ROW

DECLARE

BEGIN

		UPDATE PRODUCT P
		SET P.RATING_BY_CUSTOMER = CAST( :NEW.TOTAL_RATING AS NUMBER) / :NEW.TOTAL_CUSTOMER
		WHERE P.PRODUCT_ID = :NEW.PRODUCT_ID;

END;
/



-- UPDATE PRODUCT_RATING
-- SET 
-- 			TOTAL_RATING = 10,
-- 			TOTAL_CUSTOMER = 2
-- WHERE
-- 			PRODUCT_ID = 7;








